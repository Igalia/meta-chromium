From 8d4a3379374f4d39b76b410544ead21bac7f911d Mon Sep 17 00:00:00 2001
From: Jose Dapena Paz <jdapena@igalia.com>
Date: Mon, 1 Apr 2024 11:55:17 +0200
Subject: libstdc++: std::vector of const in ProductSpecification is not
 allowed

Bug: 41455655
Change-Id: Ibab7b33583f355d0757ae45ea684601971b5622a
---
 .../product_specifications_service.cc                       | 6 +++---
 .../product_specifications/product_specifications_service.h | 3 +--
 .../product_specifications/product_specifications_set.cc    | 2 +-
 .../product_specifications/product_specifications_set.h     | 6 +++---
 4 files changed, 8 insertions(+), 9 deletions(-)

diff --git a/components/commerce/core/product_specifications/product_specifications_service.cc b/components/commerce/core/product_specifications/product_specifications_service.cc
index fa4b367142a4b..6bb59ffddd40d 100644
--- a/components/commerce/core/product_specifications/product_specifications_service.cc
+++ b/components/commerce/core/product_specifications/product_specifications_service.cc
@@ -21,11 +21,11 @@ ProductSpecificationsService::GetSyncControllerDelegate() {
   return bridge_->change_processor()->GetControllerDelegate();
 }
 
-const std::vector<const ProductSpecificationsSet>
+const std::vector<ProductSpecificationsSet>
 ProductSpecificationsService::GetAllProductSpecifications() {
-  std::vector<const ProductSpecificationsSet> product_specifications;
+  std::vector<ProductSpecificationsSet> product_specifications;
   for (auto& entry : bridge_->entries()) {
-    std::vector<const GURL> urls;
+    std::vector<GURL> urls;
     for (auto& data : entry.second.data()) {
       urls.emplace_back(data.url());
     }
diff --git a/components/commerce/core/product_specifications/product_specifications_service.h b/components/commerce/core/product_specifications/product_specifications_service.h
index 9565df97591ad..a3e579d1690cd 100644
--- a/components/commerce/core/product_specifications/product_specifications_service.h
+++ b/components/commerce/core/product_specifications/product_specifications_service.h
@@ -26,8 +26,7 @@ class ProductSpecificationsService : public KeyedService {
   base::WeakPtr<syncer::ModelTypeControllerDelegate>
   GetSyncControllerDelegate();
 
-  const std::vector<const ProductSpecificationsSet>
-  GetAllProductSpecifications();
+  const std::vector<ProductSpecificationsSet> GetAllProductSpecifications();
 
  private:
   std::unique_ptr<ProductSpecificationsSyncBridge> bridge_;
diff --git a/components/commerce/core/product_specifications/product_specifications_set.cc b/components/commerce/core/product_specifications/product_specifications_set.cc
index 88a379afc9e08..77823fa99e874 100644
--- a/components/commerce/core/product_specifications/product_specifications_set.cc
+++ b/components/commerce/core/product_specifications/product_specifications_set.cc
@@ -10,7 +10,7 @@ ProductSpecificationsSet::ProductSpecificationsSet(
     const std::string& uuid,
     const int64_t creation_time_usec_since_epoch,
     const int64_t update_time_usec_since_epoch,
-    const std::vector<const GURL>& urls,
+    const std::vector<GURL>& urls,
     const std::string& name)
     : uuid_(base::Uuid::ParseLowercase(uuid)),
       creation_time_(base::Time::FromMillisecondsSinceUnixEpoch(
diff --git a/components/commerce/core/product_specifications/product_specifications_set.h b/components/commerce/core/product_specifications/product_specifications_set.h
index 385e7394c8c45..dd5a28d735b6f 100644
--- a/components/commerce/core/product_specifications/product_specifications_set.h
+++ b/components/commerce/core/product_specifications/product_specifications_set.h
@@ -19,7 +19,7 @@ class ProductSpecificationsSet {
   ProductSpecificationsSet(const std::string& uuid,
                            const int64_t creation_time_usec_since_epoch,
                            const int64_t update_time_usec_since_epoch,
-                           const std::vector<const GURL>& urls,
+                           const std::vector<GURL>& urls,
                            const std::string& name);
 
   ProductSpecificationsSet(const ProductSpecificationsSet&);
@@ -37,7 +37,7 @@ class ProductSpecificationsSet {
   const base::Time& update_time() const { return update_time_; }
 
   // Product urls for each item in the set
-  const std::vector<const GURL>& urls() const { return urls_; }
+  const std::vector<GURL>& urls() const { return urls_; }
 
   // Name of the set
   const std::string& name() const { return name_; }
@@ -46,7 +46,7 @@ class ProductSpecificationsSet {
   const base::Uuid uuid_;
   const base::Time creation_time_;
   const base::Time update_time_;
-  const std::vector<const GURL> urls_;
+  const std::vector<GURL> urls_;
   const std::string name_;
 };
 
-- 
2.40.1

