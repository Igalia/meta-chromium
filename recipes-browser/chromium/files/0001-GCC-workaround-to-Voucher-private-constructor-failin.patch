From 2428a7452631021c68f6fc51afd9215f353a8877 Mon Sep 17 00:00:00 2001
From: =?UTF-8?q?Jos=C3=A9=20Dapena=20Paz?= <jdapena@igalia.com>
Date: Tue, 7 Nov 2023 17:16:09 +0100
Subject: GCC: workaround to Voucher private constructor failing to be used
 from friend call

Bug: chromium:819294
Change-Id: Ifc3134221d99f7211af8f3a5a55a680e8344bf54
---
 AUTHORS            | 1 +
 rtc_base/voucher.h | 5 ++---
 2 files changed, 3 insertions(+), 3 deletions(-)

diff --git a/AUTHORS b/AUTHORS
index 6e922401d0..2b6c201efb 100644
--- a/AUTHORS
+++ b/AUTHORS
@@ -156,6 +156,7 @@ Google Inc. <*@google.com>
 Highfive, Inc. <*@highfive.com>
 Hopin Ltd. <*@hopin.to>
 HyperConnect Inc. <*@hpcnt.com>
+Igalia, S.L. <*@igalia.com>
 Intel Corporation <*@intel.com>
 LG Electronics, Inc. <*@lge.com>
 Life On Air Inc. <*@lifeonair.com>
diff --git a/rtc_base/voucher.h b/rtc_base/voucher.h
index 1a82551b74..cf80d229da 100644
--- a/rtc_base/voucher.h
+++ b/rtc_base/voucher.h
@@ -30,6 +30,8 @@ class RTC_EXPORT Voucher {
 
   using Ptr = rtc::scoped_refptr<rtc::FinalRefCountedObject<Voucher>>;
 
+  Voucher();
+
   // Vouchers aggregate attachments, which are application-specific attachments
   // that have logic unrelated to the mechanics of Voucher progression.
   class RTC_EXPORT Attachment {
@@ -62,9 +64,6 @@ class RTC_EXPORT Voucher {
   void SetAttachment(Attachment::Id id, std::unique_ptr<Attachment> attachment);
 
  private:
-  friend class rtc::FinalRefCountedObject<webrtc::Voucher>;
-  Voucher();
-
   friend class ScopedSetter;
   static void SetCurrent(Ptr ptr);
 
-- 
2.40.1

