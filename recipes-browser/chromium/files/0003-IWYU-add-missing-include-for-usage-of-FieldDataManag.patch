From d84f29534533adff3e51cdca8810e0ffd6a994c7 Mon Sep 17 00:00:00 2001
From: Jose Dapena Paz <jdapena@igalia.com>
Date: Mon, 25 Mar 2024 16:37:11 +0100
Subject: IWYU: add missing include for usage of FieldDataManager in
 autofill_agent.h

Change-Id: I70575d1dd72b9334e3b8d4805779a7e45788989e
---
 .../autofill/content/renderer/autofill_agent.h      |  2 +-
 .../browser/autofill_optimization_guide_unittest.cc | 13 ++++++++-----
 2 files changed, 9 insertions(+), 6 deletions(-)

diff --git a/components/autofill/content/renderer/autofill_agent.h b/components/autofill/content/renderer/autofill_agent.h
index 7243e8fd84497..609515cda5436 100644
--- a/components/autofill/content/renderer/autofill_agent.h
+++ b/components/autofill/content/renderer/autofill_agent.h
@@ -25,6 +25,7 @@
 #include "components/autofill/content/renderer/form_autofill_util.h"
 #include "components/autofill/content/renderer/form_tracker.h"
 #include "components/autofill/core/common/autofill_features.h"
+#include "components/autofill/core/common/field_data_manager.h"
 #include "components/autofill/core/common/mojom/autofill_types.mojom-shared.h"
 #include "components/autofill/core/common/unique_ids.h"
 #include "content/public/renderer/render_frame_observer.h"
@@ -51,7 +52,6 @@ namespace autofill {
 class FormCache;
 class PasswordAutofillAgent;
 class PasswordGenerationAgent;
-class FieldDataManager;
 
 // AutofillAgent deals with Autofill related communications between Blink and
 // the browser.
diff --git a/components/autofill/core/browser/autofill_optimization_guide_unittest.cc b/components/autofill/core/browser/autofill_optimization_guide_unittest.cc
index 0601ae438ccac..43a163957fe24 100644
--- a/components/autofill/core/browser/autofill_optimization_guide_unittest.cc
+++ b/components/autofill/core/browser/autofill_optimization_guide_unittest.cc
@@ -106,7 +106,8 @@ TEST_F(AutofillOptimizationGuideTest, EnsureIntegratorInitializedCorrectly) {
 // have seen an IBAN form.
 TEST_F(AutofillOptimizationGuideTest, IbanFieldFound_IbanAutofillBlocked) {
   FormStructure form_structure{CreateTestIbanFormData()};
-  test_api(form_structure).SetFieldTypes({IBAN_VALUE}, {IBAN_VALUE});
+  const std::vector<FieldType> field_types = {IBAN_VALUE};
+  test_api(form_structure).SetFieldTypes(field_types, field_types);
 
   EXPECT_CALL(*decider_,
               RegisterOptimizationTypes(testing::ElementsAre(
@@ -221,8 +222,8 @@ TEST_F(AutofillOptimizationGuideTest, OptimizationTypeToRegisterNotFound) {
   FormData form_data;
   form_data.fields = {field};
   FormStructure form_structure{form_data};
-  test_api(form_structure)
-      .SetFieldTypes({MERCHANT_PROMO_CODE}, {MERCHANT_PROMO_CODE});
+  const std::vector<FieldType> field_types = {MERCHANT_PROMO_CODE};
+  test_api(form_structure).SetFieldTypes(field_types);
 
   EXPECT_CALL(*decider_, RegisterOptimizationTypes).Times(0);
 
@@ -261,7 +262,8 @@ TEST_F(AutofillOptimizationGuideTest,
 TEST_F(AutofillOptimizationGuideTest,
        ShouldBlockSingleFieldSuggestions_IbanAutofillBlocked) {
   FormStructure form_structure{CreateTestIbanFormData()};
-  test_api(form_structure).SetFieldTypes({IBAN_VALUE}, {IBAN_VALUE});
+  const std::vector<FieldType> field_types = {IBAN_VALUE};
+  test_api(form_structure).SetFieldTypes(field_types, field_types);
   GURL url("https://example.com/");
   ON_CALL(*decider_,
           CanApplyOptimization(
@@ -283,7 +285,8 @@ TEST_F(AutofillOptimizationGuideTest,
 TEST_F(AutofillOptimizationGuideTest,
        ShouldNotBlockSingleFieldSuggestions_IbanAutofillBlocked) {
   FormStructure form_structure{CreateTestIbanFormData()};
-  test_api(form_structure).SetFieldTypes({IBAN_VALUE}, {IBAN_VALUE});
+  const std::vector<FieldType> field_types = {IBAN_VALUE};
+  test_api(form_structure).SetFieldTypes(field_types);
   GURL url("https://example.com/");
   ON_CALL(*decider_,
           CanApplyOptimization(
-- 
2.40.1

